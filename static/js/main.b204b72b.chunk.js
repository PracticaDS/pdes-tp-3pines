(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,a,n){},30:function(e,a,n){},37:function(e,a,n){e.exports=n(57)},44:function(e,a,n){},45:function(e,a,n){},48:function(e,a,n){},49:function(e,a,n){},50:function(e,a,n){},51:function(e,a,n){},54:function(e,a,n){},56:function(e,a,n){},57:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),c=n(18),o=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(20),u=(n(44),n(45),n(30),n(24),"SELECCIONAR_ACCION"),s=function(e){return{type:u,payload:e}},l=n(6),m=function(e){var a=e.accion,n=e.seleccionarImagen,t=e.imagen;return r.a.createElement("div",{onClick:n},r.a.createElement("img",{src:t,alt:a.nombre,className:"accion",id:a.nombre}))},d=function(e,a){return e.acciones.accionSeleccionada.nombre===a.accion.nombre?a.accion.imagenActivaUrl:a.accion.imagenInactivaUrl},f=Object(l.b)(function(e,a){return{imagen:d(e,a)}},function(e,a){return{seleccionarImagen:function(){return e(s(a.accion))}}})(m),v=function(e){var a=e.maquinas,n=e.acciones,t=function(){return n.map(function(e,a){return r.a.createElement(f,{key:"accion-".concat(a),accion:e})})},c=function(){return a.map(function(e,a){return r.a.createElement(f,{key:"maquina-".concat(a),accion:e})})};return r.a.createElement("div",{className:"toolbox-contenedor"},r.a.createElement("div",{className:"acciones-contenedor"},r.a.createElement("div",{className:"titulo"},"M\xe1quinas"),r.a.createElement("div",{className:"toolbox-acciones borde-redondeado"},r.a.createElement("div",{className:"row"},c().slice(0,2)),r.a.createElement("div",{className:"row"},c().slice(2,4)),r.a.createElement("div",{className:"row"},c().slice(4,6)))),r.a.createElement("div",{className:"acciones-contenedor"},r.a.createElement("div",{className:"titulo"},"Edici\xf3n"),r.a.createElement("div",{className:"toolbox-acciones borde-redondeado"},r.a.createElement("div",{className:"row"},t().slice(0,2)),r.a.createElement("div",{className:"row"},t().slice(2,4)))))},p=(n(48),n(1)),b=function(e,a,n,t,r){return{nombre:e,imagenActivaUrl:a,imagenInactivaUrl:n,frecuencia:t,costo:r,direccion:arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Norte",tick:function(){return 1}}},E=function(e,a,n,t){return{nombre:e,imagenActivaUrl:a,imagenInactivaUrl:n,accion:t}},g=[E("Rotar","/icons/rotar_activo.svg","/icons/rotar.svg",{ejecutar:function(e){return"Norte"===e.direccion?Object(p.a)({},e,{direccion:"Este"}):"Este"===e.direccion?Object(p.a)({},e,{direccion:"Sur"}):"Sur"===e.direccion?Object(p.a)({},e,{direccion:"Oeste"}):"Oeste"===e.direccion?Object(p.a)({},e,{direccion:"Norte"}):void 0}}),E("Eliminar","/icons/eliminar_activo.svg","/icons/eliminar.svg",{ejecutar:function(e){return null}}),E("Mover","/icons/mover_activo.svg","/icons/mover.svg",{ejecutar:function(){}})],O="Starter",j="Seller",y=[b(O,"/icons/starter_activo.svg","/icons/starter.svg","1","10"),b(j,"/icons/seller_activo.svg","/icons/seller.svg","1","15"),b("Crafter","/icons/crafter_activo.svg","/icons/crafter.svg","1","20"),b("Furnace","/icons/furnace_activo.svg","/icons/furnace.svg","1","25"),b("Transporter","/icons/transporter_activo.svg","/icons/transporter.svg","1","30","Norte")];function h(e){return y.find(function(a){return a.nombre===e.acciones.accionSeleccionada.nombre})}var N=Object(l.b)(function(e,a){return{maquina:h(e)}})(function(e){var a=e.maquina;return r.a.createElement("div",{className:"detalle-contenedor"},r.a.createElement("div",null,r.a.createElement("div",{className:"titulo"},"Detalles"),r.a.createElement("div",{className:"detalle-contenido borde-redondeado"},a?r.a.createElement("div",null,r.a.createElement("div",{className:"nombre-maquina"},a.nombre),r.a.createElement("div",{className:"costo-maquina"},"Costo: ",r.a.createElement("span",null," $",a.costo," ")),r.a.createElement("div",{className:"frecuencia-maquina"},"Frecuencia: ",r.a.createElement("span",null," ",a.frecuencia,"/s "))):"")))}),w=(n(49),n(50),n(51),function(e){var a=e.maquina;return r.a.createElement("div",null,r.a.createElement("img",{src:a.imagenInactivaUrl,alt:a.nombre,className:"maquina ".concat(a.direccion.toLowerCase())}))}),x=function(e){return"celda ".concat(e?"seleccionada":"")},A=function(e){var a=e.celda,n=e.seleccionada,t=e.seleccionar,c=e.maquina;return r.a.createElement("div",{className:x(n),onClick:t},c?r.a.createElement(w,{maquina:c}):"",a.materia?r.a.createElement("div",{className:"materia-prima"},a.materia):"")},C="SELECCIONAR_CELDA",q="AGREGAR_MAQUINA",k="EJECUTAR_ACCION",S="SELECCIONAR_CELDA_DE_MAQUINA_A_MOVER",_="MOVER_MAQUINA_DE_CELDA",R=function(e){return function(a,n){a({type:C,payload:e});var t=n().acciones.accionSeleccionada;if(function(e){return y.map(function(e){return e.nombre}).includes(e.nombre)}(t)&&a({type:q,payload:{celda:e,maquinaAAgregar:t.nombre}}),function(e){return g.map(function(e){return e.nombre}).includes(e.nombre)}(t)){if("Mover"===t.nombre){var r=e.maquina,c=n().fabrica.moverDesdeCelda;if(!r&&!c)return;return void a(c?{type:_,payload:{celda:e,accionAEjecutar:t}}:{type:S,payload:{celda:e,accionAEjecutar:t}})}a({type:k,payload:{celda:e,accionAEjecutar:t}})}}},I=Object(l.b)(function(e,a){return{celda:a.celda,seleccionada:a.celda.seleccionada,maquina:a.celda.maquina}},function(e,a){return{seleccionar:function(){return e(R(a.celda))}}})(A),D=function(e){return{gridTemplateColumns:"repeat(".concat(e.ancho,", ").concat(55,"px)"),gridTemplateRows:"repeat(".concat(e.alto,", ").concat(55,"px)"),width:"".concat(55*e.ancho,"px"),height:"".concat(55*e.alto,"px")}},U="TICK",M=function(){return{type:U}},T=n(4),J=n.n(T),L=n(7),G=function(e,a){var n={method:e,headers:{"Content-Type":"application/json"}};return a?Object(p.a)({},n,{body:JSON.stringify(a)}):n},B=function(){var e=Object(L.a)(J.a.mark(function e(a,n,t){var r;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api").concat(n),G(a,t));case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log("ERROR en ".concat(a,".\n   Path: ").concat(n,"\nStacktrace: "),e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(a,n,t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B("POST",a,n));case 1:case"end":return e.stop()}},e)}));return function(a,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.log(n,e.t0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(a,n){return e.apply(this,arguments)}}(),$={logearUsuario:function(){var e=Object(L.a)(J.a.mark(function e(a){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(Object(L.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q("/login",{usuario:a}));case 1:case"end":return e.stop()}},e)})),"Error al logear usaurio.\nStackTrace: "));case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),guardarJuego:function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",W(Object(L.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q("/fabrica",{usuario:a,fabrica:n}));case 1:case"end":return e.stop()}},e)})),"Error al guardar el juego"));case 1:case"end":return e.stop()}},e)}));return function(a,n){return e.apply(this,arguments)}}()},F="MOSTRAR_MENSAJE_DE_ERROR",P=function(e){return{type:F,payload:e}},V=n(5),K=function(){return function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.guardarJuego(n().fabrica.usuario,n().fabrica);case 3:a(Object(V.d)("/fabrica")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(P(e.t0));case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(a,n){return e.apply(this,arguments)}}()},z=function(e){setInterval(function(){e(M())},1e3)},H=Object(l.b)(function(e,a){return{alto:e.fabrica.alto,ancho:e.fabrica.ancho,celdas:e.fabrica.celdas,nombreUsuario:e.fabrica.usuario.nombre}},function(e,a){return{tick:z(e),guardarJuego:function(){return e(K())}}})(function(e){return r.a.createElement("div",{className:"fabrica-contenedor"},r.a.createElement("div",{className:"fabrica",style:D(e)},e.celdas.map(function(e,a){return r.a.createElement(I,{key:a,celda:e})})),r.a.createElement("div",null,r.a.createElement("button",{onClick:e.guardarJuego},"Guardar!")))}),X=(n(54),function(e){var a=e.ganancia,n=e.usuario;return r.a.createElement("div",{className:"ganancia-contenedor"},"Ganancias ",r.a.createElement("span",{className:"ganancia"},"$",a),r.a.createElement("code",{id:"nombre-usuario"},n))}),Y=Object(l.b)(function(e,a){return{ganancia:e.fabrica.ganancia,usuario:e.fabrica.usuario.nombre}},null)(X),Z=function(e){return r.a.createElement("div",{className:"app-contenedor"},r.a.createElement(Y,{id:"ganancia"}),r.a.createElement(v,{maquinas:y,acciones:g}),r.a.createElement(H,{id:"fabrica"}),r.a.createElement(N,{id:"detalle"}))},ee=n(12),ae=n(33),ne={nombre:""},te={accionSeleccionada:ne};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,a=arguments.length>1?arguments[1]:void 0,n=a.type,t=a.payload;switch(n){case u:return e.accionSeleccionada.nombre===t.nombre?Object(p.a)({},e,{accionSeleccionada:ne}):Object(p.a)({},e,{accionSeleccionada:t});default:return e}},ce=n(36),oe=function(e,a,n){return e.find(function(e){return e.x===a&&e.y===n})},ie=function(e,a){switch(a.maquina.direccion){case"Norte":return oe(e,a.x+1,a.y);case"Sur":return oe(e,a.x-1,a.y);case"Este":return oe(e,a.x,a.y-1);case"Oeste":return oe(e,a.x,a.y+1);default:return null}},ue=function(e,a){return e.x===a.x&&e.y===a.y},se=function(e,a){return e.x===a.x?e.y-a.y:e.x-a.x},le=function(e){return null!==e.maquina},me=function(e){return"".concat(e.x,"-").concat(e.y)},de=function(e,a){var n,t=a.type,r=a.payload;switch(t){case C:return ue(e,r)?(n=e).seleccionada?n:Object(p.a)({},n,{seleccionada:!0}):function(e){return e.seleccionada?Object(p.a)({},e,{seleccionada:!1}):e}(e);case q:var c=y.find(function(e){return e.nombre===r.maquinaAAgregar});return ue(e,r.celda)?function(e,a){return Object(p.a)({},e,{maquina:a})}(e,c):e;case k:return ue(e,r.celda)?function(e,a){return Object(p.a)({},e,{maquina:a.accion.ejecutar(e.maquina)})}(e,r.accionAEjecutar):e;case _:return ue(e,r.celda)?Object(p.a)({},e,{maquina:r.moverDesdeCelda.maquina}):ue(e,r.moverDesdeCelda)?Object(p.a)({},e,{maquina:r.celda.maquina}):e;default:return e}},fe="SETEAR_USUARIO",ve=function(e){return{type:fe,payload:e}},pe={ancho:10,alto:10,celdas:function(e,a){return Array.from(Array(e*a)).map(function(n,t){var r=t%e;return function(e,a){return{seleccionada:!1,maquina:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,materia:0,x:e,y:a}}(r,(t-r)/a)}).sort(se)}(10,10),moverDesdeCelda:null,ganancia:0,usuario:{},mensajeDeError:""},be=function(e,a){return Object(ce.a)(e.celdas).map(function(e){return de(e,a)})};var Ee,ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,a=arguments.length>1?arguments[1]:void 0,n=a.type,t=a.payload;switch(n){case U:var r=e.ganancia,c=e.celdas.filter(function(e){return e.maquina}).reduce(function(a,n){var t=ie(e.celdas,n);if(t&&n.maquina.nombre===O){var c=a[me(t)]?a[me(t)].materia:t.materia;a[me(t)]=Object(p.a)({},t,{materia:c+n.maquina.tick(t)})}return n.maquina.nombre===j&&n.materia>0&&(a[me(n)]=Object(p.a)({},n,{materia:n.materia-1}),r+=10),a},{});if(0===Object.keys(c).length)return e;var o=e.celdas.map(function(e){return c[me(e)]?c[me(e)]:e});return r!==e.ganancia?Object(p.a)({},e,{celdas:o,ganancia:r}):Object(p.a)({},e,{celdas:o});case C:case q:return Object(p.a)({},e,{celdas:be(e,{type:n,payload:t})});case k:return le(t.celda)?Object(p.a)({},e,{celdas:be(e,{type:n,payload:t})}):e;case S:return Object(p.a)({},e,{moverDesdeCelda:t.celda});case _:var i=Object(p.a)({},t,{moverDesdeCelda:e.moverDesdeCelda});return Object(p.a)({},e,{celdas:be(e,{type:n,payload:i}),moverDesdeCelda:null});case fe:return Object(p.a)({},e,{usuario:{nombre:t}});case F:return Object(p.a)({},e,{mensajeDeError:t.error});default:return e}},Oe=n(34),je=n(14),ye=n(31),he=n(10),Ne=Object(he.a)(),we=Object(ee.createStore)((Ee=Ne,Object(ee.combineReducers)({router:Object(je.b)(Ee),fabrica:ge,acciones:re})),Object(Oe.composeWithDevTools)(Object(ee.applyMiddleware)(Object(ye.a)(Ne),ae.a))),xe=n(22),Ae=(n(56),function(e){var a=e.login,n=e.setearUsuario;return r.a.createElement("div",{className:"app-contenedor"},r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",null,"Bienvenide a la Revoluci\xf3n Industrial!"),r.a.createElement("div",{className:"login-form"},r.a.createElement("input",{name:"input",onChange:function(e){return function(e,a){a(e)}(e.target.value,n)}}),r.a.createElement("button",{type:"button",onClick:a},"\u2713"))))}),Ce=function(){return function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.logearUsuario(n().fabrica.usuario);case 3:a(Object(V.d)("/fabrica")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(P(e.t0));case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(a,n){return e.apply(this,arguments)}}()},qe=Object(l.b)(function(e,a){return{usuario:a.usuario}},function(e,a){return{setearUsuario:function(a){return function(e,a){e(ve(a))}(e,a)},login:function(){return e(Ce())}}})(Ae),ke=r.a.createElement(i.a,{store:we},r.a.createElement(je.a,{history:Ne},r.a.createElement(xe.a,{from:"/",to:"login"}),r.a.createElement(xe.b,{path:"/login",component:qe}),r.a.createElement(xe.b,{path:"/fabrica",component:Z})));o.a.render(ke,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.b204b72b.chunk.js.map