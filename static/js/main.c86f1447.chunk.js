(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,a,n){},30:function(e,a,n){},37:function(e,a,n){e.exports=n(57)},44:function(e,a,n){},45:function(e,a,n){},48:function(e,a,n){},49:function(e,a,n){},50:function(e,a,n){},51:function(e,a,n){},54:function(e,a,n){},56:function(e,a,n){},57:function(e,a,n){"use strict";n.r(a);var r=n(0),t=n.n(r),c=n(18),o=n.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(20),u=(n(44),n(45),n(30),n(24),"SELECCIONAR_ACCION"),s=function(e){return{type:u,payload:e}},l=n(6),m=function(e){var a=e.accion,n=e.seleccionarImagen,r=e.imagen;return t.a.createElement("div",{onClick:n},t.a.createElement("img",{src:r,alt:a.nombre,className:"accion",id:a.nombre}))},d=function(e,a){return e.acciones.accionSeleccionada.nombre===a.accion.nombre?a.accion.imagenActivaUrl:a.accion.imagenInactivaUrl},f=Object(l.b)(function(e,a){return{imagen:d(e,a)}},function(e,a){return{seleccionarImagen:function(){return e(s(a.accion))}}})(m),v=function(e){var a=e.maquinas,n=e.acciones,r=function(){return n.map(function(e,a){return t.a.createElement(f,{key:"accion-".concat(a),accion:e})})},c=function(){return a.map(function(e,a){return t.a.createElement(f,{key:"maquina-".concat(a),accion:e})})};return t.a.createElement("div",{className:"toolbox-contenedor"},t.a.createElement("div",{className:"acciones-contenedor"},t.a.createElement("div",{className:"titulo"},"M\xe1quinas"),t.a.createElement("div",{className:"toolbox-acciones borde-redondeado"},t.a.createElement("div",{className:"row"},c().slice(0,2)),t.a.createElement("div",{className:"row"},c().slice(2,4)),t.a.createElement("div",{className:"row"},c().slice(4,6)))),t.a.createElement("div",{className:"acciones-contenedor"},t.a.createElement("div",{className:"titulo"},"Edici\xf3n"),t.a.createElement("div",{className:"toolbox-acciones borde-redondeado"},t.a.createElement("div",{className:"row"},r().slice(0,2)),t.a.createElement("div",{className:"row"},r().slice(2,4)))))},b=(n(48),n(1)),p=function(e,a,n,r,t){return{nombre:e,imagenActivaUrl:a,imagenInactivaUrl:n,frecuencia:r,costo:t,direccion:arguments.length>5&&void 0!==arguments[5]?arguments[5]:"Norte",tick:function(){return 1}}},E=function(e,a,n,r){return{nombre:e,imagenActivaUrl:a,imagenInactivaUrl:n,accion:r}},g=[E("Rotar","/icons/rotar_activo.svg","/icons/rotar.svg",{ejecutar:function(e){return"Norte"===e.direccion?Object(b.a)({},e,{direccion:"Este"}):"Este"===e.direccion?Object(b.a)({},e,{direccion:"Sur"}):"Sur"===e.direccion?Object(b.a)({},e,{direccion:"Oeste"}):"Oeste"===e.direccion?Object(b.a)({},e,{direccion:"Norte"}):void 0}}),E("Eliminar","/icons/eliminar_activo.svg","/icons/eliminar.svg",{ejecutar:function(e){return null}}),E("Mover","/icons/mover_activo.svg","/icons/mover.svg",{ejecutar:function(){}})],O="Starter",y="Seller",j=[p(O,"/icons/starter_activo.svg","/icons/starter.svg","1","10"),p(y,"/icons/seller_activo.svg","/icons/seller.svg","1","15"),p("Crafter","/icons/crafter_activo.svg","/icons/crafter.svg","1","20"),p("Furnace","/icons/furnace_activo.svg","/icons/furnace.svg","1","25"),p("Transporter","/icons/transporter_activo.svg","/icons/transporter.svg","1","30","Norte")];function h(e){return j.find(function(a){return a.nombre===e.acciones.accionSeleccionada.nombre})}var N=Object(l.b)(function(e,a){return{maquina:h(e)}})(function(e){var a=e.maquina;return t.a.createElement("div",{className:"detalle-contenedor"},t.a.createElement("div",null,t.a.createElement("div",{className:"titulo"},"Detalles"),t.a.createElement("div",{className:"detalle-contenido borde-redondeado"},a?t.a.createElement("div",null,t.a.createElement("div",{className:"nombre-maquina"},a.nombre),t.a.createElement("div",{className:"costo-maquina"},"Costo: ",t.a.createElement("span",null," $",a.costo," ")),t.a.createElement("div",{className:"frecuencia-maquina"},"Frecuencia: ",t.a.createElement("span",null," ",a.frecuencia,"/s "))):"")))}),w=(n(49),n(50),n(51),function(e){var a=e.maquina;return t.a.createElement("div",null,t.a.createElement("img",{src:a.imagenInactivaUrl,alt:a.nombre,className:"maquina ".concat(a.direccion.toLowerCase())}))}),A=function(e){return"celda ".concat(e?"seleccionada":"")},x=function(e){var a=e.celda,n=e.seleccionada,r=e.seleccionar,c=e.maquina;return t.a.createElement("div",{className:A(n),onClick:r},c?t.a.createElement(w,{maquina:c}):"",a.materia?t.a.createElement("div",{className:"materia-prima"},a.materia):"")},C="SELECCIONAR_CELDA",q="AGREGAR_MAQUINA",k="EJECUTAR_ACCION",S="SELECCIONAR_CELDA_DE_MAQUINA_A_MOVER",_="MOVER_MAQUINA_DE_CELDA",R=function(e){return function(a,n){a({type:C,payload:e});var r=n().acciones.accionSeleccionada;if(function(e){return j.map(function(e){return e.nombre}).includes(e.nombre)}(r)&&a({type:q,payload:{celda:e,maquinaAAgregar:r.nombre}}),function(e){return g.map(function(e){return e.nombre}).includes(e.nombre)}(r)){if("Mover"===r.nombre){var t=e.maquina,c=n().fabrica.moverDesdeCelda;if(!t&&!c)return;return void a(c?{type:_,payload:{celda:e,accionAEjecutar:r}}:{type:S,payload:{celda:e,accionAEjecutar:r}})}a({type:k,payload:{celda:e,accionAEjecutar:r}})}}},U=Object(l.b)(function(e,a){return{celda:a.celda,seleccionada:a.celda.seleccionada,maquina:a.celda.maquina}},function(e,a){return{seleccionar:function(){return e(R(a.celda))}}})(x),I=function(e){return{gridTemplateColumns:"repeat(".concat(e.ancho,", ").concat(55,"px)"),gridTemplateRows:"repeat(".concat(e.alto,", ").concat(55,"px)"),width:"".concat(55*e.ancho,"px"),height:"".concat(55*e.alto,"px")}},D="TICK",T=function(){return{type:D}},M=n(4),J=n.n(M),L=n(7),B=function(e,a){var n={method:e,headers:{"Content-Type":"application/json"}};return a?Object(b.a)({},n,{body:JSON.stringify(a)}):n},G=function(){var e=Object(L.a)(J.a.mark(function e(a,n,r){var t;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/api").concat(n),B(a,r));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.log("ERROR en ".concat(a,".\n   Path: ").concat(n,"\nStacktrace: "),e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(a,n,r){return e.apply(this,arguments)}}(),F=function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G("POST",a,n));case 1:case"end":return e.stop()}},e)}));return function(a,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.log(n,e.t0),e.t0;case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(a,n){return e.apply(this,arguments)}}(),W={logearUsuario:function(){var e=Object(L.a)(J.a.mark(function e(a){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(Object(L.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F("/login",{usuario:{nombre:a}}));case 1:case"end":return e.stop()}},e)})),"Error al logear usaurio.\nStackTrace: "));case 1:case"end":return e.stop()}},e)}));return function(a){return e.apply(this,arguments)}}(),guardarJuego:function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q(Object(L.a)(J.a.mark(function e(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F("/fabrica",{usuario:{nombre:a},fabrica:n}));case 1:case"end":return e.stop()}},e)})),"Error al guardar el juego"));case 1:case"end":return e.stop()}},e)}));return function(a,n){return e.apply(this,arguments)}}()},$="MOSTRAR_MENSAJE_DE_ERROR",P=function(e){return{type:$,payload:e}},V=n(5),K=function(){return function(){var e=Object(L.a)(J.a.mark(function e(a,n){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.guardarJuego(n().fabrica.nombreUsuario,n().fabrica);case 3:a(Object(V.d)("/fabrica")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(P(e.t0));case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(a,n){return e.apply(this,arguments)}}()},z=function(e){setInterval(function(){e(T())},1e3)},H=Object(l.b)(function(e,a){return{alto:e.fabrica.alto,ancho:e.fabrica.ancho,celdas:e.fabrica.celdas,nombreUsuario:e.fabrica.nombreUsuario}},function(e,a){return{tick:z(e),guardarJuego:function(){return e(K())}}})(function(e){return t.a.createElement("div",{className:"fabrica-contenedor"},t.a.createElement("div",{className:"fabrica",style:I(e)},e.celdas.map(function(e,a){return t.a.createElement(U,{key:a,celda:e})})),t.a.createElement("div",null,t.a.createElement("button",{onClick:e.guardarJuego},"Guardar!")))}),X=(n(54),function(e){var a=e.ganancia,n=e.usuario;return t.a.createElement("div",{className:"ganancia-contenedor"},"Ganancias ",t.a.createElement("span",{className:"ganancia"},"$",a),t.a.createElement("code",{id:"nombre-usuario"},n))}),Y=Object(l.b)(function(e,a){return{ganancia:e.fabrica.ganancia,usuario:e.fabrica.nombreUsuario}},null)(X),Z=function(e){return t.a.createElement("div",{className:"app-contenedor"},t.a.createElement(Y,{id:"ganancia"}),t.a.createElement(v,{maquinas:j,acciones:g}),t.a.createElement(H,{id:"fabrica"}),t.a.createElement(N,{id:"detalle"}))},ee=n(12),ae=n(33),ne={nombre:""},re={accionSeleccionada:ne};var te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0,n=a.type,r=a.payload;switch(n){case u:return e.accionSeleccionada.nombre===r.nombre?Object(b.a)({},e,{accionSeleccionada:ne}):Object(b.a)({},e,{accionSeleccionada:r});default:return e}},ce=n(36),oe=function(e,a,n){return e.find(function(e){return e.x===a&&e.y===n})},ie=function(e,a){switch(a.maquina.direccion){case"Norte":return oe(e,a.x+1,a.y);case"Sur":return oe(e,a.x-1,a.y);case"Este":return oe(e,a.x,a.y-1);case"Oeste":return oe(e,a.x,a.y+1);default:return null}},ue=function(e,a){return e.x===a.x&&e.y===a.y},se=function(e,a){return e.x===a.x?e.y-a.y:e.x-a.x},le=function(e){return null!==e.maquina},me=function(e){return"".concat(e.x,"-").concat(e.y)},de=function(e,a){var n,r=a.type,t=a.payload;switch(r){case C:return ue(e,t)?(n=e).seleccionada?n:Object(b.a)({},n,{seleccionada:!0}):function(e){return e.seleccionada?Object(b.a)({},e,{seleccionada:!1}):e}(e);case q:var c=j.find(function(e){return e.nombre===t.maquinaAAgregar});return ue(e,t.celda)?function(e,a){return Object(b.a)({},e,{maquina:a})}(e,c):e;case k:return ue(e,t.celda)?function(e,a){return Object(b.a)({},e,{maquina:a.accion.ejecutar(e.maquina)})}(e,t.accionAEjecutar):e;case _:return ue(e,t.celda)?Object(b.a)({},e,{maquina:t.moverDesdeCelda.maquina}):ue(e,t.moverDesdeCelda)?Object(b.a)({},e,{maquina:t.celda.maquina}):e;default:return e}},fe="SETEAR_USUARIO",ve=function(e){return{type:fe,payload:e}},be="SETEAR_FABRICA",pe=function(e){return{type:be,payload:e}},Ee={ancho:10,alto:10,celdas:function(e,a){return Array.from(Array(e*a)).map(function(n,r){var t=r%e;return function(e,a){return{seleccionada:!1,maquina:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,materia:0,x:e,y:a}}(t,(r-t)/a)}).sort(se)}(10,10),moverDesdeCelda:null,ganancia:0,nombreUsuario:"",mensajeDeError:""},ge=function(e,a){return Object(ce.a)(e.celdas).map(function(e){return de(e,a)})};var Oe,ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,a=arguments.length>1?arguments[1]:void 0,n=a.type,r=a.payload;switch(n){case D:var t=e.ganancia,c=e.celdas.filter(function(e){return e.maquina}).reduce(function(a,n){var r=ie(e.celdas,n);if(r&&n.maquina.nombre===O){var c=a[me(r)]?a[me(r)].materia:r.materia;a[me(r)]=Object(b.a)({},r,{materia:c+n.maquina.tick(r)})}return n.maquina.nombre===y&&n.materia>0&&(a[me(n)]=Object(b.a)({},n,{materia:n.materia-1}),t+=10),a},{});if(0===Object.keys(c).length)return e;var o=e.celdas.map(function(e){return c[me(e)]?c[me(e)]:e});return t!==e.ganancia?Object(b.a)({},e,{celdas:o,ganancia:t}):Object(b.a)({},e,{celdas:o});case C:case q:return Object(b.a)({},e,{celdas:ge(e,{type:n,payload:r})});case k:return le(r.celda)?Object(b.a)({},e,{celdas:ge(e,{type:n,payload:r})}):e;case S:return Object(b.a)({},e,{moverDesdeCelda:r.celda});case _:var i=Object(b.a)({},r,{moverDesdeCelda:e.moverDesdeCelda});return Object(b.a)({},e,{celdas:ge(e,{type:n,payload:i}),moverDesdeCelda:null});case fe:return Object(b.a)({},e,{nombreUsuario:r});case be:return r;case $:return Object(b.a)({},e,{mensajeDeError:r.error});default:return e}},je=n(34),he=n(14),Ne=n(31),we=n(10),Ae=Object(we.a)(),xe=Object(ee.createStore)((Oe=Ae,Object(ee.combineReducers)({router:Object(he.b)(Oe),fabrica:ye,acciones:te})),Object(je.composeWithDevTools)(Object(ee.applyMiddleware)(Object(Ne.a)(Ae),ae.a))),Ce=n(22),qe=(n(56),function(e){var a=e.login,n=e.setearUsuario;return t.a.createElement("div",{className:"app-contenedor"},t.a.createElement("div",{className:"login-container"},t.a.createElement("h1",null,"Bienvenide a la Revoluci\xf3n Industrial!"),t.a.createElement("div",{className:"login-form"},t.a.createElement("input",{name:"input",onChange:function(e){return function(e,a){a(e)}(e.target.value,n)}}),t.a.createElement("button",{type:"button",onClick:a},"\u2713"))))}),ke=function(){return function(){var e=Object(L.a)(J.a.mark(function e(a,n){var r;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.logearUsuario(n().fabrica.nombreUsuario);case 3:(r=e.sent).fabrica.celdas.length>0&&a(pe(r.fabrica)),a(Object(V.d)("/fabrica")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(P(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(a,n){return e.apply(this,arguments)}}()},Se=Object(l.b)(function(e,a){return{usuario:a.usuario}},function(e,a){return{setearUsuario:function(a){return function(e,a){e(ve(a))}(e,a)},login:function(){return e(ke())}}})(qe),_e=t.a.createElement(i.a,{store:xe},t.a.createElement(he.a,{history:Ae},t.a.createElement(Ce.a,{from:"/",to:"login"}),t.a.createElement(Ce.b,{path:"/login",component:Se}),t.a.createElement(Ce.b,{path:"/fabrica",component:Z})));o.a.render(_e,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.c86f1447.chunk.js.map